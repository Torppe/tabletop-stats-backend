(this["webpackJsonptabletop-stats"]=this["webpackJsonptabletop-stats"]||[]).push([[0],{101:function(e,a,t){e.exports=t(131)},131:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(10),l=t.n(c),o=t(6),i=t.n(o),s=t(12),u=t(8),m=t(33),p=t(185),d=t(87),f=t(13),g=t(193),v=t(192),E=t(191),b=t(201),h=t(197),y=t(187),x=t(132),w=t(172),j=t(173),O=t(34),S=function(e){var a=e.icon,t=e.primary,n=e.to,c=e.handlePageTransition;return r.a.createElement("li",null,r.a.createElement(x.a,{button:!0,component:O.b,to:n,onClick:c},a?r.a.createElement(w.a,null,a):null,r.a.createElement(j.a,{primary:t})))},k=t(89),C=t.n(k),N=t(194),P=t(49),B=t(20),I=t.n(B),F=null,M=function(e){var a;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(I.a.post("/api/login",e));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}))},A=function(e){F="bearer ".concat(e)},G=function(){return F},T=function(){var e;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(I.a.get("/api/games"));case 2:return e=a.sent,a.abrupt("return",e.data);case 4:case"end":return a.stop()}}))},H=function(e){var a,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a={headers:{Authorization:G()}},n.next=3,i.a.awrap(I.a.post("/api/games",e,a));case 3:return t=n.sent,n.abrupt("return",t.data);case 5:case"end":return n.stop()}}))},R=function(e){var a;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(I.a.get("".concat("/api/games","/").concat(e)));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}))},W=t(14),D=t(175),U=t(176),Z=t(177),z=t(178),J=t(179),L=t(198),q=t(180),K=t(181),V=t(182),Q=t(86),X=t.n(Q),Y=t(174),$=t(134),_=Object($.a)((function(e){return{root:{position:"fixed",borderRadius:"0.5em",bottom:e.spacing(2),right:e.spacing(2)}}})),ee=function(e){var a=_();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{onClick:e.handleClick,className:a.root,color:"secondary","aria-label":"add"},r.a.createElement(X.a,null)))},ae=Object(d.a)({item:{width:"11.5em"},cardContent:{bottom:0,position:"absolute",padding:"0.4em 0.8em 0 1em","&:last-child":{paddingBottom:"0.5em"}},card:{position:"relative",borderRadius:"10px",height:"10em"},input:{backgroundColor:"white"}}),te=function(e){var a=e.value,t=e.handleGameChange,c=e.handleAddGame,l=e.setIsModifying,o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0],m=i[1],p=ae(),d=function(){m(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{open:u,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(U.a,{id:"alert-dialog-title"},'Add a new game called "',a,'"?'),r.a.createElement(Z.a,null,r.a.createElement(z.a,{onClick:d,color:"primary",variant:"outlined"},"Cancel"),r.a.createElement(z.a,{onClick:c,color:"primary",variant:"contained"},"Confirm"))),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m(!0)}},r.a.createElement(J.a,{variant:"outlined"},r.a.createElement(L.a,{id:"new-game",placeholder:"Add game",variant:"outlined",color:"secondary",className:p.input,autoFocus:!0,value:a,onBlur:function(){u||l(!1)},onChange:t}))))},ne=function(e){var a=e.games,t=e.setGames,c=e.user;(0,e.setHeader)("Games");var l=ae(),o=Object(n.useState)(null),u=Object(s.a)(o,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(s.a)(d,2),g=f[0],v=f[1],E=function(){var e,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e={title:m},r.prev=1,r.next=4,i.a.awrap(H(e));case 4:n=r.sent,t([].concat(Object(W.a)(a),[n])),v(!1),p(""),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),console.log("failed to create game",r.t0);case 13:case"end":return r.stop()}}),null,null,[[1,10]])},b=function(){v(!g),p("")},h=function(e){p(e.target.value)};return r.a.createElement(r.a.Fragment,null,!g&&r.a.createElement(q.a,{container:!0,spacing:2,justify:"center"},a.map((function(e){return r.a.createElement(q.a,{key:e.id,item:!0,className:l.item},r.a.createElement(O.b,{to:"/game-stats/".concat(e.id)},r.a.createElement(K.a,{className:l.card},r.a.createElement(V.a,{className:l.cardContent},r.a.createElement(P.a,{align:"left",style:{fontSize:"1.2em"}},e.title)))))}))),c?r.a.createElement(r.a.Fragment,null,g&&r.a.createElement(te,{value:m,handleGameChange:h,handleAddGame:E,setIsModifying:v}),!g&&r.a.createElement(ee,{handleClick:b})):null)},re=Object(d.a)({item:{width:"11.5em"},cardContent:{padding:"0.4em 0.8em 0 1em","&:last-child":{paddingBottom:"0.5em"}},card:{borderRadius:"10px"},title:{fontSize:"1.8em",lineHeight:"1.25em",paddingBottom:"0.3em"}}),ce=function(e){var a=e.title,t=e.value,n=e.titleStyle,c=re();return a&&t?r.a.createElement(q.a,{item:!0,className:c.item},r.a.createElement(K.a,{className:c.card},r.a.createElement(V.a,{className:c.cardContent},r.a.createElement(P.a,{className:c.title,color:"textSecondary",style:n},a),r.a.createElement(P.a,{align:"right",variant:"h4",component:"h2"},t),e.children))):null},le=function(e){var a=e.matches,t=a.map((function(e){return e.players})).flat(),n=t.map((function(e){return e.points})),c=+(n.reduce((function(e,a){return e+a}),0)/n.length).toFixed(2),l=function(e){if(e){for(var a=e.map((function(e){return e.players})),t=new Map,n=0;n<a.length;n++){var r=a[n].reduce((function(e,a){return a.points>e.points?a:e})),c=t.get(r.player.name);c?t.set(r.player.name,c+1):t.set(r.player.name,1)}var l=Object(W.a)(t.entries()).reduce((function(e,a){return a[1]>e[1]?a:e}),[0,0]);return{name:l[0],wins:l[1]}}}(a),o=t.length>0?t.reduce((function(e,a){return a.points>e.points?a:e})):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{container:!0,spacing:2,justify:"center"},r.a.createElement(ce,{title:"Games played",value:a.length}),r.a.createElement(ce,{title:"Average points",value:c}),o&&r.a.createElement(ce,{title:"Most points",value:o.points},r.a.createElement(P.a,{color:"textSecondary",variant:"body1",component:"p",align:"right"},o.player.name)),l&&r.a.createElement(ce,{title:"Most wins",value:l.wins},r.a.createElement(P.a,{color:"textSecondary",variant:"body1",component:"p",align:"right"},l.name))))},oe=t(189),ie=t(66),se=t(65),ue=t(199),me=t(196),pe=t(186),de=t(200),fe=t(188),ge=function(e){var a=e.selectedPlayers,t=e.player,n=e.players,c=e.removePlayer,l=e.updatePlayer,o=a.map((function(e){return e.name}));return r.a.createElement(q.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(q.a,{item:!0,md:6,xs:5},r.a.createElement(J.a,{fullWidth:!0,variant:"outlined",required:!0},r.a.createElement(ue.a,{id:"player-label"},"Player"),r.a.createElement(me.a,{labelId:"player-label",id:"player",value:t.name,onChange:function(e){return function(e){var a=Object(se.a)({},t,{name:e});l(a)}(e.target.value)}},n.map((function(e){return r.a.createElement(pe.a,{key:e.name,disabled:o.includes(e.name),value:e.name},e.name)}))))),r.a.createElement(q.a,{item:!0,md:5,xs:5},r.a.createElement(de.a,{fullWidth:!0,required:!0,id:"points",label:"Points",type:"number",defaultValue:t.points,onChange:function(e){return function(e){var a=Object(se.a)({},t,{points:Number(e)});l(a)}(e.target.value)},variant:"outlined"})),r.a.createElement(q.a,{item:!0,xs:1},r.a.createElement(y.a,{"aira-label":"delete",onClick:function(){return c(t)}},r.a.createElement(fe.a,null))))},ve=function(){var e;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(I.a.get("/api/players"));case 2:return e=a.sent,a.abrupt("return",e.data);case 4:case"end":return a.stop()}}))},Ee=function(e){var a;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(I.a.get("".concat("/api/players","/").concat(e)));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}))},be=t(88),he=t.n(be),ye=t(190),xe=Object(d.a)({cancelButton:{float:"right",marginTop:"-30px",marginRight:"-30px",marginBottom:"15px"}}),we=function(e){var a=e.handleSubmit,t=e.handleCloseForm,c=Object(n.useState)([]),l=Object(s.a)(c,2),o=l[0],u=l[1],m=Object(n.useState)([]),p=Object(s.a)(m,2),d=p[0],f=p[1],g=Object(n.useState)(!1),v=Object(s.a)(g,2),E=v[0],b=v[1],h=xe(),x={marginTop:d.length>0?"2em":null};Object(n.useEffect)((function(){!function(){var e;i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.a.awrap(ve());case 3:e=a.sent,u(e),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("failed to fetch player data",a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}()}),[]);var w=function(e){var a=d.map((function(a){return a.id!==e.id?a:e}));f(a)},j=function(e){var a=d.filter((function(a){return a.id!==e.id}));f(a)},O=function(){b(!1)};return r.a.createElement("div",null,r.a.createElement(D.a,{open:E,onClose:O,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(U.a,{id:"alert-dialog-title"},"Add a new match?"),r.a.createElement(Z.a,null,r.a.createElement(z.a,{onClick:O,color:"primary",variant:"outlined"},"Cancel"),r.a.createElement(z.a,{onClick:function(){var e=d.filter((function(e){return e.name}));if(!(e.length<1)){var t=e.map((function(e){var a=o.find((function(a){return a.name===e.name}));return a?{player:a.id,points:e.points}:null}));a(t)}},color:"primary",variant:"contained"},"Confirm"))),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b(!0)}},r.a.createElement(oe.a,{maxWidth:"sm",disableGutters:!0},r.a.createElement(ie.a,{style:{padding:"2em"}},r.a.createElement(y.a,{onClick:t,"aira-label":"cancel",className:h.cancelButton},r.a.createElement(ye.a,null)),d.map((function(e){return r.a.createElement(ge,{key:e.id,player:e,players:o,selectedPlayers:d,removePlayer:j,updatePlayer:w})})),r.a.createElement(oe.a,{disableGutters:!0},r.a.createElement(q.a,{container:!0,justify:"space-between",style:x},r.a.createElement(q.a,{item:!0},r.a.createElement(z.a,{variant:"outlined",color:"primary",onClick:function(){var e={id:he()(),name:"",points:null};f([].concat(Object(W.a)(d),[e]))}},"Add player")),r.a.createElement(q.a,{item:!0},r.a.createElement(z.a,{variant:"contained",color:"primary",type:"submit"},"Submit"))))))))},je=function(e){var a,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a={headers:{Authorization:G()}},n.next=3,i.a.awrap(I.a.post("/api/matches",e,a));case 3:return t=n.sent,n.abrupt("return",t.data);case 5:case"end":return n.stop()}}))},Oe=function(e){var a;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(I.a.get("".concat("/api/matches","/game/").concat(e)));case 2:return a=t.sent,t.abrupt("return",a.data.filter((function(e){return e.game})));case 4:case"end":return t.stop()}}))},Se=function(e){var a;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(I.a.get("".concat("/api/matches","/player/").concat(e)));case 2:return a=t.sent,t.abrupt("return",a.data.filter((function(e){return e.game})));case 4:case"end":return t.stop()}}))},ke=function(e){var a=e.gameId,t=e.setHeader,c=e.user,l=Object(n.useState)([]),o=Object(s.a)(l,2),u=o[0],m=o[1],p=Object(n.useState)(!1),d=Object(s.a)(p,2),f=d[0],g=d[1];Object(n.useEffect)((function(){!function(){var e;i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(Oe(a));case 3:e=t.sent,m(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("failed to get match data",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])}(),function(){var e;i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(R(a));case 3:e=n.sent,t(e.title),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("failed to fetch header",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}()}),[a,t]);var v=function(e){var t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={game:a,players:e},r.prev=1,r.next=4,i.a.awrap(je(t));case 4:n=r.sent,m([].concat(Object(W.a)(u),[n])),g(!1),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),console.log("failed to create a new match",r.t0);case 12:case"end":return r.stop()}}),null,null,[[1,9]])};return r.a.createElement(r.a.Fragment,null,!f&&r.a.createElement(le,{matches:u}),c?r.a.createElement(r.a.Fragment,null,f?r.a.createElement(we,{handleSubmit:v,handleCloseForm:function(){return g(!1)}}):r.a.createElement(ee,{handleClick:function(){return g(!0)}})):null)};function Ce(){return(Ce=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function Ne(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var Pe=r.a.createElement("g",null,r.a.createElement("path",{d:"M107.256,109.623c-1.697,0 -3.073,-1.489 -3.073,-3.326c0,-1.25 0,-2.785 0,-4.489c0,-10.152 2.765,-20.08 7.948,-28.542c0.996,-1.629 1.576,-3.581 1.576,-5.678c0,-1.795 -0.424,-3.483 -1.175,-4.951c-0.772,-1.532 -1.176,-3.248 -1.176,-4.993l0,-0.362c0,-5.688 4.268,-10.306 9.525,-10.306l0.061,0c5.229,0.036 9.464,4.64 9.464,10.306l0,0.362c0,1.745 -0.405,3.461 -1.176,4.993c-0.751,1.468 -1.176,3.156 -1.176,4.951c0,2.097 0.58,4.049 1.577,5.678c5.183,8.462 7.947,18.39 7.947,28.542c0.001,1.704 0.001,3.239 0.001,4.489c0,1.837 -1.376,3.326 -3.074,3.326l-13.624,0l-13.625,0Z"}),r.a.createElement("path",{d:"M54.273,109.623c-2.189,0 -3.963,-1.92 -3.963,-4.288c0,-1.611 0,-3.59 0.001,-5.786c0,-13.089 3.564,-25.887 10.246,-36.797c1.284,-2.099 2.033,-4.616 2.033,-7.32c0,-2.313 -0.548,-4.489 -1.516,-6.382c-0.995,-1.974 -1.516,-4.187 -1.516,-6.436l0,-0.468c0,-7.332 5.502,-13.285 12.279,-13.285l0.079,0c6.741,0.046 12.2,5.981 12.2,13.285l0,0.468c0,2.249 -0.521,4.462 -1.516,6.436c-0.968,1.893 -1.515,4.069 -1.515,6.382c0,2.704 0.748,5.221 2.032,7.32c6.682,10.91 10.246,23.708 10.246,36.797c0.001,2.196 0.001,4.175 0.001,5.786c0,2.368 -1.774,4.288 -3.963,4.288l-17.564,0l-17.564,0Z"}),r.a.createElement("path",{d:"M15.327,109.623c-1.353,0 -2.45,-1.187 -2.45,-2.651c0,-0.996 0,-2.219 0.001,-3.577c0,-8.09 2.203,-16.002 6.334,-22.746c0.794,-1.298 1.256,-2.853 1.256,-4.525c0,-1.43 -0.339,-2.775 -0.937,-3.945c-0.615,-1.221 -0.937,-2.589 -0.937,-3.979l0,-0.289c0,-4.533 3.401,-8.213 7.591,-8.213l0.049,0.001c4.166,0.028 7.541,3.697 7.541,8.212l0,0.289c0,1.39 -0.322,2.758 -0.937,3.979c-0.598,1.17 -0.937,2.515 -0.937,3.945c0,1.672 0.463,3.227 1.256,4.525c4.131,6.744 6.334,14.656 6.334,22.746c0.001,1.358 0.001,2.581 0.001,3.577c0,1.464 -1.097,2.651 -2.45,2.651l-10.857,0l-10.858,0Z"}),r.a.createElement("g",{id:"Layer1"},r.a.createElement("path",{d:"M128.458,14.756c0,0 -16.339,7.466 -19.73,9.015c-0.392,0.18 -0.839,0.2 -1.246,0.057c-4.498,-1.583 -31.546,-11.101 -36.667,-12.903c-0.523,-0.184 -1.104,-0.096 -1.548,0.235c-6.942,5.164 -62.337,46.371 -62.337,46.371l-6.136,-6.8c0,0 59.785,-44.583 67.054,-50.003c0.449,-0.336 1.038,-0.422 1.565,-0.231c5.205,1.893 32.84,11.94 37.395,13.596c0.407,0.149 0.857,0.132 1.252,-0.046c3.105,-1.395 16.869,-7.582 16.869,-7.582c0,0 -0.328,-0.772 -0.706,-1.659c-0.231,-0.542 -0.156,-1.165 0.197,-1.636c0.353,-0.472 0.93,-0.719 1.515,-0.651c2.367,0.279 5.361,0.631 5.361,0.631c0,0 3.509,0.549 6.048,0.946c0.561,0.087 1.038,0.454 1.267,0.974c0.23,0.519 0.179,1.119 -0.135,1.593c-1.497,2.26 -3.628,5.478 -3.628,5.478c0,0 -1.513,2.381 -2.749,4.325c-0.32,0.504 -0.886,0.796 -1.482,0.763c-0.596,-0.032 -1.128,-0.383 -1.392,-0.918c-0.414,-0.839 -0.767,-1.555 -0.767,-1.555Z"})),r.a.createElement("path",{d:"M0.236,1.856c0,-0.442 0.176,-0.866 0.489,-1.179c0.312,-0.312 0.736,-0.488 1.178,-0.488c1.535,0 3.799,0 5.333,0c0.442,0 0.866,0.176 1.179,0.488c0.312,0.313 0.488,0.737 0.488,1.179c0,14.029 0,111.884 0,111.884l129.343,0c0.92,0 1.666,0.747 1.666,1.667c0,1.534 0,3.799 0,5.333c0,0.921 -0.746,1.667 -1.666,1.667l-3.404,0l-125.939,0l-7,0c-0.442,0 -0.866,-0.176 -1.178,-0.488c-0.313,-0.313 -0.489,-0.737 -0.489,-1.179c0,-13.539 0,-105.345 0,-118.884Z"})),Be=function(e){var a=e.svgRef,t=e.title,n=Ne(e,["svgRef","title"]);return r.a.createElement("svg",Ce({width:"100%",height:"100%",viewBox:"0 0 140 123",xmlSpace:"preserve",xmlnsSerif:"http://www.serif.com/",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:a},n),t?r.a.createElement("title",null,t):null,Pe)},Ie=r.a.forwardRef((function(e,a){return r.a.createElement(Be,Ce({svgRef:a},e))})),Fe=(t.p,Object(d.a)((function(e){return{heading:{marginTop:"65px",marginBottom:"65px"},button:{width:"150px",borderRadius:"40px",padding:"15px 30px",marginTop:"1em"},input:{backgroundColor:"white",borderRadius:"40px",textAlign:"center"},logo:{width:"8em"},container:Object(u.a)({},e.breakpoints.down("xs"),{position:"fixed",bottom:"50px",right:0})}}))),Me=function(e){var a=e.setUser,t=e.user;(0,e.setHeader)("Login");var c=Object(n.useState)(""),l=Object(s.a)(c,2),o=l[0],u=l[1],m=Object(n.useState)(""),p=Object(s.a)(m,2),d=p[0],g=p[1],v=Fe(),E=Object(f.a)();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:null===t?function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,i.a.awrap(M({username:o,password:d}));case 4:t=n.sent,window.localStorage.setItem("loggedTabletopAppUser",JSON.stringify(t)),A(t.token),a(t),u(""),g(""),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),console.log("failed to login",n.t0);case 15:case"end":return n.stop()}}),null,null,[[1,12]])}:function(e){e.preventDefault(),window.localStorage.removeItem("loggedTabletopAppUser"),a(null)}},r.a.createElement(q.a,{container:!0,spacing:2,justify:"center",alignItems:"center",direction:"column",className:v.container},r.a.createElement(q.a,{item:!0,className:v.logo},r.a.createElement(Ie,{fill:E.palette.text.primary})),r.a.createElement(q.a,{item:!0,className:v.heading},r.a.createElement(P.a,{component:"h2",variant:"h4",color:"textPrimary",gutterBottom:!0},"Keep track of"),r.a.createElement(P.a,{component:"h2",variant:"h4",color:"textPrimary"},"Tabletop stats")),null===t?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{item:!0},r.a.createElement(J.a,{variant:"outlined"},r.a.createElement(L.a,{id:"username",value:o,color:"secondary",placeholder:"username",className:v.input,inputProps:{style:{textAlign:"center"}},onChange:function(e){var a=e.target;return u(a.value)}}))),r.a.createElement(q.a,{item:!0},r.a.createElement(J.a,{variant:"outlined"},r.a.createElement(L.a,{id:"password",value:d,type:"password",placeholder:"password",color:"secondary",className:v.input,inputProps:{style:{textAlign:"center"}},onChange:function(e){var a=e.target;return g(a.value)}}))),r.a.createElement(q.a,{item:!0},r.a.createElement(z.a,{type:"submit",variant:"contained",color:"secondary",className:v.button},"login"))):r.a.createElement(z.a,{variant:"contained",color:"secondary",type:"submit",className:v.button},"logout"))))},Ae=function(e){(0,e.setHeader)("Players");var a=Object(n.useState)([]),t=Object(s.a)(a,2),c=t[0],l=t[1];return Object(n.useEffect)((function(){try{!function(){var e;i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(ve());case 2:e=a.sent,l(e);case 4:case"end":return a.stop()}}))}()}catch(e){console.log("failed to fetch player data")}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{disablePadding:!0},c.map((function(e){return r.a.createElement(S,{key:e.id,to:"/player-stats/".concat(e.id),primary:e.name})}))))},Ge=function(e){var a=e.matches,t=e.playerId,n=function(){for(var e=a.map((function(e){return e.players})),n=0,r=0;r<e.length;r++)e[r].reduce((function(e,a){return a.points>e.points?a:e})).player.id===t&&n++;return n}(),c=+(n/a.length*100).toFixed(1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{container:!0,spacing:2,justify:"center",style:{marginBottom:"0.35em"}},r.a.createElement(ce,{title:"Matches",value:a.length}),r.a.createElement(ce,{title:"Wins",value:n}),r.a.createElement(ce,{title:"Win %",value:c&&"".concat(c," %")})))},Te=function(e){var a=e.matches,t=e.playerId,n=e.gameId;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{matches:a.filter((function(e){return e.game.id===n})),playerId:t}))},He=function(e){var a=[],t=new Set,n=!0,r=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var i=l.value;t.has(i.game.id)||(t.add(i.game.id),a.push({id:i.game.id,title:i.game.title}))}}catch(s){r=!0,c=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}return a},Re=Object(d.a)((function(e){return{container:{maxWidth:"470px"},bottomMargin:{marginBottom:"1em"},gameStats:{marginBottom:"0.35em",marginTop:"1em"}}})),We=function(e){var a=e.playerId,t=e.setHeader,c=Object(n.useState)([]),l=Object(s.a)(c,2),o=l[0],u=l[1],m=Object(n.useState)([]),p=Object(s.a)(m,2),d=p[0],f=p[1],g=Object(n.useState)(""),v=Object(s.a)(g,2),E=v[0],b=v[1],h=Re();Object(n.useEffect)((function(){try{!function(){var e;i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(Se(a));case 2:e=t.sent,u(e),f(He(e));case 5:case"end":return t.stop()}}))}(),function(){var e;i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Ee(a));case 2:e=n.sent,t(e.name);case 4:case"end":return n.stop()}}))}()}catch(e){console.log("failed to fetch match or player data",e)}}),[a,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{disableGutters:!0,className:h.container},r.a.createElement(P.a,{component:"h2",variant:"h4",align:"center",className:h.bottomMargin},"Overall stats"),r.a.createElement(Ge,{matches:o,playerId:a}),r.a.createElement(P.a,{component:"h2",variant:"h4",align:"center",className:h.gameStats},"Game stats"),r.a.createElement(J.a,{variant:"outlined",fullWidth:!0,className:h.bottomMargin},r.a.createElement(ue.a,{id:"game-label"},"Game"),r.a.createElement(me.a,{labelId:"game-label",id:"game-select-menu",value:E,onChange:function(e){var a=e.target;b(a.value)}},r.a.createElement(pe.a,{value:""},r.a.createElement("em",null,"None")),d.map((function(e){return r.a.createElement(pe.a,{key:e.id,value:e.id},e.title)})))),E&&r.a.createElement(Te,{matches:o,playerId:a,gameId:E})))},De=Object(d.a)((function(e){return{root:{display:"flex"},drawer:Object(u.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(u.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(u.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)}}})),Ue=function(e){var a=De(),t=Object(f.a)(),c=Object(n.useState)(!1),l=Object(s.a)(c,2),o=l[0],u=l[1],d=Object(n.useState)(""),x=Object(s.a)(d,2),w=x[0],j=x[1],O=Object(n.useState)([]),k=Object(s.a)(O,2),B=k[0],I=k[1],F=Object(n.useState)(null),M=Object(s.a)(F,2),G=M[0],H=M[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedTabletopAppUser");if(e){var a=JSON.parse(e);a&&(H(a),A(a.token))}try{!function(){var e;i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(T());case 2:e=a.sent,I(e);case 4:case"end":return a.stop()}}))}()}catch(t){console.log("failed to fetch game data")}}),[]);var R=function(){u(!o)},W=function(){o&&u(!1)},D=r.a.createElement("div",null,r.a.createElement("div",{className:a.toolbar}),r.a.createElement(E.a,null),r.a.createElement(p.a,{disablePadding:!0},r.a.createElement(S,{key:"Home",to:"/",primary:"Home",handlePageTransition:function(){return W()}}),r.a.createElement(S,{key:"Games",to:"/game-stats",primary:"Games",handlePageTransition:function(){return W()}}),r.a.createElement(S,{key:"Players",to:"/player-stats",primary:"Players",handlePageTransition:function(){return W()}})));return r.a.createElement("div",{className:a.root},r.a.createElement(v.a,null),r.a.createElement(g.a,{style:{boxShadow:"none"},color:"primary",position:"fixed",className:a.appBar},r.a.createElement(N.a,null,r.a.createElement(y.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:R,className:a.menuButton},r.a.createElement(C.a,null)),r.a.createElement(P.a,{color:"textPrimary",variant:"h6",noWrap:!0},w))),r.a.createElement("div",{className:a.drawer},r.a.createElement(h.a,{smUp:!0,implementation:"css"},r.a.createElement(b.a,{variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:o,onClose:R,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},D)),r.a.createElement(h.a,{xsDown:!0,implementation:"css"},r.a.createElement(b.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},D))),r.a.createElement("div",{className:a.content},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Me,{setUser:H,user:G,setHeader:j})}}),r.a.createElement(m.a,{exact:!0,path:"/game-stats",render:function(){return r.a.createElement(ne,{games:B,setGames:I,user:G,setHeader:j})}}),r.a.createElement(m.a,{exact:!0,path:"/game-stats/:game",render:function(e){var a=e.match;return r.a.createElement(ke,{gameId:a.params.game,setHeader:j,user:G})}}),r.a.createElement(m.a,{exact:!0,path:"/player-stats",render:function(){return r.a.createElement(Ae,{setHeader:j})}}),r.a.createElement(m.a,{exact:!0,path:"/player-stats/:player",render:function(e){var a=e.match;return r.a.createElement(We,{playerId:a.params.player,setHeader:j,user:G})}})))},Ze=function(){return r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(Ue,null)))},ze=t(195),Je=t(90),Le=Object(Je.a)({palette:{primary:{main:"#d88833",contrastText:"#6E4B20"},secondary:{main:"#ffd59a",contrastText:"#6E4B20"},text:{primary:"#663E11",secondary:"#9B8D75"},background:{default:"#d88833"}},typography:{fontFamily:["Arvo","serif"].join(",")}});l.a.render(r.a.createElement(ze.a,{theme:Le},r.a.createElement(Ze,null)),document.getElementById("root"))}},[[101,1,2]]]);
//# sourceMappingURL=main.fec1678b.chunk.js.map