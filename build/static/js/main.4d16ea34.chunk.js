(this["webpackJsonptabletop-stats"]=this["webpackJsonptabletop-stats"]||[]).push([[0],{139:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),l=t.n(c),i=t(18),o=t(46),m=t(8),u=t(31),s=t(187),d=t(83),p=t(11),f=t(197),E=t(196),b=t(195),g=t(203),h=t(202),v=t(192),y=t(140),j=t(181),O=t(182),x=t(45),k=function(e){var a=e.icon,t=e.primary,n=e.to;return r.a.createElement("li",null,r.a.createElement(y.a,{button:!0,component:x.b,to:n},a?r.a.createElement(j.a,null,a):null,r.a.createElement(O.a,{primary:t})))},w=t(84),S=t.n(w),C=t(198),G=t(53),P=t(24),N=t.n(P),F=function(){return N.a.get("/api/games")},A=function(e){return N.a.post("/api/games",e)},B=function(e){return N.a.get("".concat("/api/games","/").concat(e))},M=t(80),D=t.n(M),H=t(12),I=t(204),W=t(81),T=t.n(W),q=t(183),J=t(141),R=Object(J.a)((function(e){return{root:{position:"fixed",borderRadius:"0.5em",bottom:e.spacing(2),right:e.spacing(2)}}})),L=function(e){var a=R();return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{onClick:e.handleClick,className:a.root,color:"primary","aria-label":"add"},r.a.createElement(T.a,null)))},U=function(e){var a=e.value,t=e.handleGameChange,n=e.handleAddGame;return r.a.createElement("form",{onSubmit:n},r.a.createElement(I.a,{id:"new-game",label:"Add game",variant:"outlined",autoFocus:!0,value:a,onChange:t}))},V=function(e){var a=e.games,t=e.setGames,c=Object(n.useState)(null),l=Object(i.a)(c,2),o=l[0],m=l[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),p=d[0],f=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,a.map((function(e){return r.a.createElement(k,{key:e.id,primary:e.title,to:"/game-stats/".concat(e.id)})}))),p&&r.a.createElement(U,{value:o,handleGameChange:function(e){m(e.target.value)},handleAddGame:function(e){return D.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e.preventDefault(),A({title:o}).then((function(e){t([].concat(Object(H.a)(a),[e.data])),f(!1),m("")})).catch((function(e){console.log("failed to create game")}));case 3:case"end":return n.stop()}}))}}),r.a.createElement(L,{handleClick:function(){f(!p),m("")}}))},z=(t(125),t(188)),K=t(189),Q=t(190),X=function(e){var a=e.title,t=e.value;return a&&t?r.a.createElement(z.a,{item:!0},r.a.createElement(K.a,null,r.a.createElement(Q.a,null,r.a.createElement(G.a,{color:"textSecondary",gutterBottom:!0},a),r.a.createElement(G.a,{variant:"h5",component:"h2"},t),e.children))):null},Y=function(e){var a=e.matches,t=a.map((function(e){return e.players})).flat(),n=t.map((function(e){return e.points})),c=+(n.reduce((function(e,a){return e+a}),0)/n.length).toFixed(2),l=function(e){if(e){for(var a=e.map((function(e){return e.players})),t=new Map,n=0;n<a.length;n++){var r=a[n].reduce((function(e,a){return a.points>e.points?a:e})),c=t.get(r.player.name);c?t.set(r.player.name,c+1):t.set(r.player.name,1)}var l=Object(H.a)(t.entries()).reduce((function(e,a){return a[1]>e[1]?a:e}),[0,0]);return{name:l[0],wins:l[1]}}}(a),i=t.length>0?t.reduce((function(e,a){return a.points>e.points?a:e})):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{container:!0,spacing:2,justify:"center"},r.a.createElement(X,{title:"Average points",value:c}),i&&r.a.createElement(X,{title:"Most points",value:i.points},r.a.createElement(G.a,{color:"textSecondary"},i.player.name)),l&&r.a.createElement(X,{title:"Most wins",value:l.wins},r.a.createElement(G.a,{color:"textSecondary"},l.name))))},Z=t(193),$=t(87),_=t(194),ee=t(186),ae=t(206),te=t(200),ne=t(191),re=t(208),ce=function(e){var a=e.selectedPlayers,t=e.player,n=e.players,c=e.removePlayer,l=e.updatePlayer,i=a.map((function(e){return e.name}));return r.a.createElement(z.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(z.a,{item:!0,md:6,xs:5},r.a.createElement(ee.a,{fullWidth:!0,variant:"outlined",required:!0},r.a.createElement(ae.a,{id:"player-label"},"Player"),r.a.createElement(te.a,{labelId:"player-label",id:"player",value:t.name,onChange:function(e){return function(e){var a=Object(o.a)({},t,{name:e});l(a)}(e.target.value)}},n.map((function(e){return r.a.createElement(ne.a,{key:e.name,disabled:i.includes(e.name),value:e.name},e.name)}))))),r.a.createElement(z.a,{item:!0,md:5,xs:5},r.a.createElement(I.a,{fullWidth:!0,required:!0,id:"points",label:"Points",type:"number",defaultValue:t.points,onChange:function(e){return function(e){var a=Object(o.a)({},t,{points:Number(e)});l(a)}(e.target.value)},variant:"outlined"})),r.a.createElement(z.a,{item:!0,xs:1},r.a.createElement(v.a,{"aira-label":"delete",onClick:function(){return c(t)}},r.a.createElement(re.a,null))))},le=function(){return N.a.get("/api/players")},ie=t(82),oe=t.n(ie),me=function(e){var a=e.handleSubmit,t=Object(n.useState)([]),c=Object(i.a)(t,2),l=c[0],o=c[1],m=Object(n.useState)([]),u=Object(i.a)(m,2),s=u[0],d=u[1],p={marginTop:s.length>0?"2em":null};Object(n.useEffect)((function(){le().then((function(e){o(e.data)})).catch((function(e){console.log("failed to fetch player data",e)}))}),[]);var f=function(e){var a=s.map((function(a){return a.id!==e.id?a:e}));d(a)},E=function(e){var a=s.filter((function(a){return a.id!==e.id}));d(a)};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=s.filter((function(e){return e.name}));if(!(t.length<1)){var n=t.map((function(e){var a=l.find((function(a){return a.name===e.name}));return a?{player:a.id,points:e.points}:null}));a(n)}}},r.a.createElement(Z.a,{maxWidth:"sm",disableGutters:!0},r.a.createElement($.a,{style:{padding:"2em"}},s.map((function(e){return r.a.createElement(ce,{key:e.id,player:e,players:l,selectedPlayers:s,removePlayer:E,updatePlayer:f})})),r.a.createElement(Z.a,{disableGutters:!0},r.a.createElement(z.a,{container:!0,justify:"space-between",style:p},r.a.createElement(z.a,{item:!0},r.a.createElement(_.a,{variant:"outlined",color:"primary",onClick:function(){var e={id:oe()(),name:"",points:null};d([].concat(Object(H.a)(s),[e]))}},"Add player")),r.a.createElement(z.a,{item:!0},r.a.createElement(_.a,{variant:"contained",color:"primary",type:"submit"},"Submit"))))))))},ue=function(e){return N.a.post("/api/matches",e)},se=function(e){return N.a.get("".concat("/api/matches","/game/").concat(e))},de=function(e){var a=e.gameId,t=e.setHeader,c=Object(n.useState)([]),l=Object(i.a)(c,2),o=l[0],m=l[1],u=Object(n.useState)(!1),s=Object(i.a)(u,2),d=s[0],p=s[1];Object(n.useEffect)((function(){se(a).then((function(e){m(e.data)})).catch((function(e){console.log("failed to get match data",e)})),B(a).then((function(e){t(e.data.title)}))}),[a,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{handleClick:function(){return p(!d)}}),d?r.a.createElement(me,{handleSubmit:function(e){ue({game:a,players:e}).then((function(e){m([].concat(Object(H.a)(o),[e.data])),p(!1)})).catch((function(e){console.log("failed to create a new match",e)}))}}):r.a.createElement(Y,{matches:o}))},pe=Object(d.a)((function(e){return{root:{display:"flex"},drawer:Object(m.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(m.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(m.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,toolbarDrawer:Object(o.a)({backgroundColor:"red"},e.mixins.toolbar),drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)}}})),fe=function(e){var a=pe(),t=Object(p.a)(),c=Object(n.useState)(!1),l=Object(i.a)(c,2),o=l[0],m=l[1],d=Object(n.useState)(""),y=Object(i.a)(d,2),j=y[0],O=y[1],x=Object(n.useState)([]),w=Object(i.a)(x,2),P=w[0],N=w[1];Object(n.useEffect)((function(){F().then((function(e){N(e.data)})).catch((function(e){console.log("failed to get game data")}))}),[]);var A=function(){m(!o)},B=r.a.createElement("div",null,r.a.createElement("div",{className:a.toolbar}),r.a.createElement(b.a,null),r.a.createElement(s.a,null,r.a.createElement(k,{key:"Home",to:"/",primary:"Home"}),r.a.createElement(k,{key:"Games",to:"/game-stats",primary:"Games"})));return r.a.createElement("div",{className:a.root},r.a.createElement(E.a,null),r.a.createElement(f.a,{position:"fixed",className:a.appBar},r.a.createElement(C.a,null,r.a.createElement(v.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:A,className:a.menuButton},r.a.createElement(S.a,null)),r.a.createElement(G.a,{variant:"h6",noWrap:!0},j))),r.a.createElement("div",{className:a.drawer,"aria-label":"games stats"},r.a.createElement(h.a,{smUp:!0,implementation:"css"},r.a.createElement(g.a,{variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:o,onClose:A,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},B)),r.a.createElement(h.a,{xsDown:!0,implementation:"css"},r.a.createElement(g.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},B))),r.a.createElement("div",{className:a.content},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(u.a,{exact:!0,path:"/",render:function(){return O("")}}),r.a.createElement(u.a,{exact:!0,path:"/game-stats",render:function(){return O("Games"),r.a.createElement(V,{games:P,setGames:N})}}),r.a.createElement(u.a,{exact:!0,path:"/game-stats/:game",render:function(e){var a=e.match;return r.a.createElement(de,{gameId:a.params.game,setHeader:O})}})))},Ee=function(){return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(fe,null)))},be=t(199),ge=t(85),he=Object(ge.a)({palette:{primary:{light:"#ffc046",main:"#ff8f00",dark:"#c56000",contrastText:"#000000"},secondary:{light:"#ffffff",main:"#f9fbe7",dark:"#c6c8b5",contrastText:"#000000"}},typography:{fontFamily:["Arial"]}});l.a.render(r.a.createElement(be.a,{theme:he},r.a.createElement(Ee,null)),document.getElementById("root"))},95:function(e,a,t){e.exports=t(139)}},[[95,1,2]]]);
//# sourceMappingURL=main.4d16ea34.chunk.js.map